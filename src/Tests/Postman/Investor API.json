{
	"variables": [],
	"info": {
		"name": "Investor API",
		"_postman_id": "b2de111c-302a-67db-647b-0760f29a7888",
		"description": "",
		"schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
	},
	"item": [
		{
			"name": "Create Test User",
			"description": "",
			"item": [
				{
					"name": "Create User",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;"
								]
							}
						}
					],
					"request": {
						"url": "{{URL}}/api/1.0/users",
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"description": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"displayName\": \"Test User\",\r\n  \"email\": \"test.user@host.com\",\r\n  \"password\": \"a1b2c3d4e5f6\"\r\n}"
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "Get Access Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"// Remember the JWT for subsequent requests.",
									"var jsonData = JSON.parse(responseBody);",
									"postman.setEnvironmentVariable(\"token\", jsonData.accessToken);"
								]
							}
						}
					],
					"request": {
						"url": "{{URL}}/api/1.0/token",
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"description": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"test.user@host.com\",\r\n  \"password\": \"a1b2c3d4e5f6\"\r\n}"
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "Check User Details",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"tests[\"Email is correct\"] = jsonData.email === \"test.user@host.com\";",
									"tests[\"DisplayName is correct\"] = jsonData.displayName === \"Test User\";",
									"tests[\"Level is correct\"] = jsonData.level === \"Investor\";",
									"tests[\"Account exists\"] = jsonData.accounts.length === 1;",
									"tests[\"Account balance is 1000000\"] = jsonData.accounts[0].balance === 1000000;",
									"",
									"// Remember the account-id for subsequent requests.",
									"postman.setEnvironmentVariable(\"accountId\", jsonData.accounts[0].id);",
									""
								]
							}
						}
					],
					"request": {
						"url": "{{URL}}/api/1.0/users",
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"description": ""
							},
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"description": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"test.user@host.com\",\r\n  \"password\": \"a1b2c3d4e5f6\"\r\n}"
						},
						"description": ""
					},
					"response": []
				}
			]
		},
		{
			"name": "Search Shares",
			"description": "",
			"item": [
				{
					"name": "Search by Symbol",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"tests[\"Actoual count is 1\"] = jsonData.items.length === 1;",
									"tests[\"Total row count is 1\"] = jsonData.totalRowCount === 1;",
									"tests[\"Total page Count is 1\"] = jsonData.totalPageCount === 1;",
									"tests[\"Page number is 1\"] = jsonData.pageNumber === 1;",
									"tests[\"Expected share is returned\"] = jsonData.items[0].symbol === \"ANZ\";",
									""
								]
							}
						}
					],
					"request": {
						"url": {
							"raw": "{{URL}}/api/1.0/shares?searchTerm=ANZ",
							"host": [
								"{{URL}}"
							],
							"path": [
								"api",
								"1.0",
								"shares"
							],
							"query": [
								{
									"key": "searchTerm",
									"value": "ANZ",
									"equals": true,
									"description": ""
								}
							],
							"variable": []
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"description": ""
							},
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"description": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"test.user@host.com\",\r\n  \"password\": \"a1b2c3d4e5f6\"\r\n}"
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "Search by Name",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"tests[\"Actoual count is 1\"] = jsonData.items.length === 1;",
									"tests[\"Total row count is 1\"] = jsonData.totalRowCount === 1;",
									"tests[\"Total page Count is 1\"] = jsonData.totalPageCount === 1;",
									"tests[\"Page number is 1\"] = jsonData.pageNumber === 1;",
									"tests[\"Expected share is returned\"] = jsonData.items[0].symbol === \"BHP\";",
									""
								]
							}
						}
					],
					"request": {
						"url": {
							"raw": "{{URL}}/api/1.0/shares?searchTerm=Billiton",
							"host": [
								"{{URL}}"
							],
							"path": [
								"api",
								"1.0",
								"shares"
							],
							"query": [
								{
									"key": "searchTerm",
									"value": "Billiton",
									"equals": true,
									"description": ""
								}
							],
							"variable": []
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"description": ""
							},
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"description": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"test.user@host.com\",\r\n  \"password\": \"a1b2c3d4e5f6\"\r\n}"
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "Search with Paging",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"tests[\"Actoual count is 20\"] = jsonData.items.length === 20;",
									"tests[\"Total page Count is 4\"] = jsonData.totalPageCount === 4;",
									"tests[\"Page number is 3\"] = jsonData.pageNumber === 3;",
									"tests[\"Page size is 20\"] = jsonData.pageSize === 20;",
									""
								]
							}
						}
					],
					"request": {
						"url": {
							"raw": "{{URL}}/api/1.0/shares?searchTerm=Australia&pageNumber=3&pageSize=20",
							"host": [
								"{{URL}}"
							],
							"path": [
								"api",
								"1.0",
								"shares"
							],
							"query": [
								{
									"key": "searchTerm",
									"value": "Australia",
									"equals": true,
									"description": ""
								},
								{
									"key": "pageNumber",
									"value": "3",
									"equals": true,
									"description": ""
								},
								{
									"key": "pageSize",
									"value": "20",
									"equals": true,
									"description": ""
								}
							],
							"variable": []
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"description": ""
							},
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"description": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"test.user@host.com\",\r\n  \"password\": \"a1b2c3d4e5f6\"\r\n}"
						},
						"description": ""
					},
					"response": []
				}
			]
		},
		{
			"name": "Place Buy Order",
			"description": "",
			"item": [
				{
					"name": "Place Order",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									""
								]
							}
						}
					],
					"request": {
						"url": "{{URL}}/api/1.0/accounts/{{accountId}}/orders",
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"description": ""
							},
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"description": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"side\": \"Buy\",\r\n  \"symbol\": \"ANZ\",\r\n  \"quantity\": 1000,\r\n  \"nonce\": 1\r\n}"
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "Check Account Details",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"tests[\"Account has 1 position\"] = jsonData.positions.length === 1;",
									"tests[\"Position has correct symbol\"] = jsonData.positions[0].symbol === \"ANZ\";",
									"tests[\"Position has correct quantity\"] = jsonData.positions[0].quantity === 1000;",
									""
								]
							}
						}
					],
					"request": {
						"url": "{{URL}}/api/1.0/accounts/{{accountId}}",
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"description": ""
							},
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"description": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"test.user@host.com\",\r\n  \"password\": \"a1b2c3d4e5f6\"\r\n}"
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "Place Order Duplicate",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 400\"] = responseCode.code === 400;",
									""
								]
							}
						}
					],
					"request": {
						"url": "{{URL}}/api/1.0/accounts/{{accountId}}/orders",
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"description": ""
							},
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"description": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"side\": \"Buy\",\r\n  \"symbol\": \"ANZ\",\r\n  \"quantity\": 1000,\r\n  \"nonce\": 1\r\n}"
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "Place Top-up Order",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 201\"] = responseCode.code === 201;",
									""
								]
							}
						}
					],
					"request": {
						"url": "{{URL}}/api/1.0/accounts/{{accountId}}/orders",
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"description": ""
							},
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"description": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"side\": \"Buy\",\r\n  \"symbol\": \"ANZ\",\r\n  \"quantity\": 500,\r\n  \"nonce\": 3\r\n}"
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "Check Account Details",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"tests[\"Account has 1 position\"] = jsonData.positions.length === 1;",
									"tests[\"Position has correct symbol\"] = jsonData.positions[0].symbol === \"ANZ\";",
									"tests[\"Position has correct quantity\"] = jsonData.positions[0].quantity === 1500;",
									""
								]
							}
						}
					],
					"request": {
						"url": "{{URL}}/api/1.0/accounts/{{accountId}}",
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"description": ""
							},
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"description": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"test.user@host.com\",\r\n  \"password\": \"a1b2c3d4e5f6\"\r\n}"
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "Check Transactions",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 200\"] = responseCode.code === 200;",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"tests[\"Actual count is 7\"] = jsonData.items.length === 7;",
									"tests[\"Total count is 7\"] = jsonData.totalRowCount === 7;",
									""
								]
							}
						}
					],
					"request": {
						"url": "{{URL}}/api/1.0/accounts/{{accountId}}/transactions",
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"description": ""
							},
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"description": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"test.user@host.com\",\r\n  \"password\": \"a1b2c3d4e5f6\"\r\n}"
						},
						"description": ""
					},
					"response": []
				}
			]
		},
		{
			"name": "Delete Test User",
			"description": "",
			"item": [
				{
					"name": "Delete User",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests[\"Status code is 204\"] = responseCode.code === 204;"
								]
							}
						}
					],
					"request": {
						"url": "{{URL}}/api/1.0/users",
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"description": ""
							},
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"description": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"test.user@host.com\",\r\n  \"password\": \"a1b2c3d4e5f6\"\r\n}"
						},
						"description": ""
					},
					"response": []
				}
			]
		}
	]
}